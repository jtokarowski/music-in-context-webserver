(this["webpackJsonptoggle-form-demo"]=this["webpackJsonptoggle-form-demo"]||[]).push([[0],{176:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(9),o=a.n(i),r=(a(83),a(29)),l=a(30),c=a(38),h=a(37),u=(a(84),a(56)),p=a(27),m=a(73),d=(a(71),a(72),a(157)),f=!0,y=!0,g=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n.state={playlists:[],playlistIDs:[],playlistNames:[],playlistIndicators:[]},n}return Object(l.a)(a,[{key:"handleChange",value:function(t,e){var a=this.state.playlistNames.indexOf(e),n={};n[e]=!this.state[e],this.setState(Object(u.a)(Object(u.a)({},this.state),n)),this.state.playlistIndicators[a]=n[e]}},{key:"handleSubmit",value:function(t){t.preventDefault();for(var e=[],a=0;a<this.state.playlistIndicators.length;a++)this.state.playlistIndicators[a]&&e.push(this.state.playlistIDs[a]);var n=e.join(","),s="https://music-in-context.herokuapp.com/ui?".concat("refresh_token=",this.props.refreshToken,"&form_data=",n,"&mode=",this.props.mode);window.location.href=s}},{key:"render",value:function(){var t=this;try{this.props.data.map((function(e){t.state[e.playlistname]=t.state[e.playlistname],f&&(t.state.playlists.push(e),t.state.playlistIDs.push(e.playlistID),t.state.playlistNames.push(e.playlistName),t.state.playlistIndicators.push(!1))})),f=!1,console.log("state after pushing data",this.state);for(var e=[],a=function(a){var n=t.state.playlistNames[a];e.push(s.a.createElement(m.a,{toggle:!0,checked:t.state[n],onChange:function(e){return t.handleChange(e,n)}},n))},n=0;n<this.state.playlists.length;n++)a(n);return e.push(s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"submit",value:"Submit"}))),e}catch(i){console.log("still loading"),y=!0}if(y)return s.a.createElement("div",{className:"chart"},s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"}},s.a.createElement(d,{name:"ball-triangle-path",fadeIn:"none"})),s.a.createElement("div",null,s.a.createElement("h1",null,"Loading user playlists...")))}}]),a}(s.a.Component),v=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(r.a)(this,a),(t=e.call(this)).state={},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=window.location.search,a=new URLSearchParams(e),n={refresh_token:a.get("refresh_token"),mode:a.get("mode")};fetch("https://music-in-context-backend.herokuapp.com/getuserplaylists",{mode:"cors",method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){t.setState({apiData:e.userPlaylists,refreshToken:e.refreshToken,mode:e.mode})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(g,{mode:this.state.mode,refreshToken:this.state.refreshToken,data:this.state.apiData}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},78:function(t,e,a){t.exports=a(176)},83:function(t,e,a){},84:function(t,e,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.8a816f79.chunk.js.map