(this["webpackJsonpradio-form-demo"]=this["webpackJsonpradio-form-demo"]||[]).push([[0],{175:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),l=a(9),i=a.n(l),o=(a(84),a(20)),r=a(21),c=a(26),u=a(25),h=(a(85),a(59)),m=a(15),p=a(33),d=(a(43),a(44),a(74)),f=!0,y=!0,b=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).handleChange=s.handleChange.bind(Object(m.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(m.a)(s)),s.state={playlists:[],playlistIDs:[],playlistNames:[],playlistIndicators:[],clusters:[],clusterIDs:[],clusterDescriptions:[],clusterMostFrequentArtists:[],clusterMostFrequentGenres:[],clusterIndicators:[]},s}return Object(r.a)(a,[{key:"handleChange",value:function(t,e){var a=this.state.clusterDescriptions.indexOf(e),s={};s[e]=!this.state[e],this.setState(Object(h.a)(Object(h.a)({},this.state),s)),this.state.clusterIndicators[a]=s[e]}},{key:"handleSubmit",value:function(t){t.preventDefault();for(var e=[],a=0;a<this.state.clusterIndicators.length;a++)this.state.clusterIndicators[a]&&e.push(this.state.clusterIDs[a]);var s=e.join(","),n="https://music-in-context.herokuapp.com/ui?".concat("refresh_token=",this.props.refreshToken,"&form_data=",s,"&mode=",this.props.mode);window.location.href=n}},{key:"render",value:function(){var t=this;try{this.props.data.clusters.map((function(e){if(t.state[e.playlistname]=t.state[e.playlistname],f){t.state.playlists.push(e),t.state.playlistIDs.push(e.playlistID),t.state.playlistNames.push(e.playlistName),t.state.playlistIndicators.push(!1),t.state.clusters.push(e),t.state.clusterIDs.push(e.clusterNumber);var a="This sub-collection contains the following genres: "+e.mostFrequentGenres.join()+" and the following artists: "+e.mostFrequentArtists.join();console.log(a),t.state.clusterDescriptions.push(a),t.state.clusterIndicators.push(!1)}})),f=!1,console.log("state after pushing data",this.state);var e=[];e.push(n.a.createElement("h3",null,"Select one or more collections for inclusion in your custom playlist"));for(var a=function(a){var s=t.state.clusterDescriptions[a];e.push(n.a.createElement(p.a,{toggle:!0,checked:t.state[s],onChange:function(e){return t.handleChange(e,s)}},s))},s=0;s<this.state.playlists.length;s++)a(s);return e.push(n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("input",{type:"submit",value:"Submit"}))),e}catch(l){console.log("still loading"),y=!0}if(y)return n.a.createElement("div",{className:"loading"},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"}},n.a.createElement(d,{name:"ball-triangle-path",fadeIn:"none"})),n.a.createElement("div",null,n.a.createElement("h1",null,"Building a pool of recommended tracks")))}}]),a}(n.a.Component),v=a(74),g=!0,k=!0,E=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={selectedPlaylist:null,playlists:[],playlistIDs:[],playlistNames:[],playlistIndicators:[]},s.changePlaylist=s.changePlaylist.bind(Object(m.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(m.a)(s)),s}return Object(r.a)(a,[{key:"changePlaylist",value:function(t){this.setState({selectedPlaylist:t})}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=this.state.selectedPlaylist,a=this.state.playlistNames.indexOf(e),s=this.state.playlistIDs[a];console.log("selected playlist ID",s);var n="https://music-in-context.herokuapp.com/ui?".concat("refresh_token=",this.props.refreshToken,"&form_data=",s,"&mode=",this.props.mode);window.location.href=n}},{key:"render",value:function(){var t=this;try{this.props.data.userPlaylists.map((function(e){t.state[e.playlistname]=t.state[e.playlistname],g&&(t.state.playlists.push(e),t.state.playlistIDs.push(e.playlistID),t.state.playlistNames.push(e.playlistName),t.state.playlistIndicators.push(!1))})),g=!1,console.log("state after pushing data",this.state);var e=[];e.push(n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("input",{type:"submit",value:"Submit"})));for(var a=function(a){var s=t.state.playlistNames[a];e.push(n.a.createElement(p.b,{name:"playlist",checked:t.state.selectedPlaylist===s,onChange:function(){t.changePlaylist(s)}},s))},s=0;s<this.state.playlists.length;s++)a(s);return e.push(n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("input",{type:"submit",value:"Submit"}))),e}catch(l){console.log("still loading"),k=!0}if(k)return n.a.createElement("div",{className:"loading"},n.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"}},n.a.createElement(v,{name:"ball-triangle-path",fadeIn:"none"})),n.a.createElement("div",null,n.a.createElement("h1",null,"Loading User Playlists")))}}]),a}(n.a.Component),j=function(t){Object(c.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={mode:"tunnel"},t}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=window.location.search,a=new URLSearchParams(e),s={refresh_token:a.get("refresh_token"),mode:a.get("mode")},n="";"tunnel"==s.mode?n="https://music-in-context-backend.herokuapp.com/clustertracks":"playlist"==s.mode&&(n="https://music-in-context-backend.herokuapp.com/getuserplaylists"),fetch(n,{mode:"cors",method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){console.log("data from post",e),t.setState({data:e,refreshToken:e.refreshToken,mode:e.mode})}))}},{key:"render",value:function(){return"tunnel"==this.state.mode?n.a.createElement("div",{className:"App"},n.a.createElement(b,{mode:this.state.mode,refreshToken:this.state.refreshToken,data:this.state.data})):"playlist"==this.state.mode?n.a.createElement("div",{className:"App"},n.a.createElement(E,{mode:this.state.mode,refreshToken:this.state.refreshToken,data:this.state.data})):void 0}}]),a}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,a){t.exports=a(175)},84:function(t,e,a){},85:function(t,e,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.e4ea97d0.chunk.js.map