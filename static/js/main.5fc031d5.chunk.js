(this["webpackJsonpradio-form-demo"]=this["webpackJsonpradio-form-demo"]||[]).push([[0],{176:function(t,e,s){"use strict";s.r(e);var n=s(0),a=s.n(n),o=s(9),r=s.n(o),i=(s(84),s(29)),l=s(30),c=s(38),u=s(37),h=(s(85),s(56)),m=s(27),d=s(74),p=(s(71),s(72),s(73)),f=!0,g=!0,v=function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(t){var n;return Object(i.a)(this,s),(n=e.call(this,t)).handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.state={playlists:[],playlistIDs:[],playlistNames:[],playlistIndicators:[],clusters:[],clusterIDs:[],clusterDescriptions:[],clusterMostFrequentArtists:[],clusterMostFrequentGenres:[],clusterIndicators:[]},n}return Object(l.a)(s,[{key:"handleChange",value:function(t,e){var s=this.state.clusterDescriptions.indexOf(e),n={};n[e]=!this.state[e],this.setState(Object(h.a)(Object(h.a)({},this.state),n)),this.state.clusterIndicators[s]=n[e]}},{key:"handleSubmit",value:function(t){t.preventDefault();for(var e=[],s=0;s<this.state.clusterIndicators.length;s++)this.state.clusterIndicators[s]&&e.push(this.state.clusterIDs[s]);var n=e.join(","),a="https://music-in-context.herokuapp.com/ui?".concat("refresh_token=",this.props.refreshToken,"&form_data=",n,"&mode=",this.props.mode);window.location.href=a}},{key:"render",value:function(){var t=this;try{this.props.data.map((function(e){if(t.state[e.playlistname]=t.state[e.playlistname],f){t.state.playlists.push(e),t.state.playlistIDs.push(e.playlistID),t.state.playlistNames.push(e.playlistName),t.state.playlistIndicators.push(!1),t.state.clusters.push(e),t.state.clusterIDs.push(e.clusterNumber);var s="This sub-collection contains the following genres: "+e.mostFrequentGenres.join()+" and the following artists: "+e.mostFrequentArtists.join();console.log(s),t.state.clusterDescriptions.push(s),t.state.clusterIndicators.push(!1)}})),f=!1,console.log("state after pushing data",this.state);var e=[];e.push(a.a.createElement("h3",null,"Select one or more collections for inclusion in your custom playlist"));for(var s=function(s){var n=t.state.clusterDescriptions[s];e.push(a.a.createElement(d.a,{toggle:!0,checked:t.state[n],onChange:function(e){return t.handleChange(e,n)}},n))},n=0;n<this.state.playlists.length;n++)s(n);return e.push(a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("input",{type:"submit",value:"Submit"}))),e}catch(o){console.log("still loading"),g=!0}if(g)return a.a.createElement("div",{className:"loading"},a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"}},a.a.createElement(p,{name:"ball-triangle-path",fadeIn:"none"})),a.a.createElement("div",null,a.a.createElement("h1",null,"Building a pool of recommended tracks")))}}]),s}(a.a.Component),y=(s(73),function(t){Object(c.a)(s,t);var e=Object(u.a)(s);function s(){var t;return Object(i.a)(this,s),(t=e.call(this)).state={},t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var t=this,e=window.location.search,s=new URLSearchParams(e),n={refresh_token:s.get("refresh_token"),mode:s.get("mode")};fetch("https://music-in-context-backend.herokuapp.com/clustertracks",{mode:"cors",method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){console.log("data from post",e),t.setState({clusters:e.clusters,refreshToken:e.refreshToken,mode:e.mode})}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(v,{mode:this.state.mode,refreshToken:this.state.refreshToken,data:this.state.clusters}))}}]),s}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},79:function(t,e,s){t.exports=s(176)},84:function(t,e,s){},85:function(t,e,s){}},[[79,1,2]]]);
//# sourceMappingURL=main.5fc031d5.chunk.js.map